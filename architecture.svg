<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 400" width="900" height="400">
  <defs>
    <!-- Arrowhead marker -->
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto" markerUnits="strokeWidth">
      <polygon points="0 0, 10 3.5, 0 7" fill="#8b949e" />
    </marker>
    <!-- Arrowhead marker for downward arrows -->
    <marker id="arrow-down" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto" markerUnits="strokeWidth">
      <polygon points="0 0, 10 3.5, 0 7" fill="#8b949e" />
    </marker>
    <!-- Glow filter for component boxes -->
    <filter id="glow" x="-10%" y="-10%" width="120%" height="120%">
      <feGaussianBlur stdDeviation="2" result="blur" />
      <feComposite in="SourceGraphic" in2="blur" operator="over" />
    </filter>
    <!-- Subtle shadow -->
    <filter id="shadow" x="-5%" y="-5%" width="115%" height="115%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000000" flood-opacity="0.3" />
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="400" rx="8" fill="#0d1117" />

  <!-- Subtle grid pattern for depth -->
  <pattern id="grid" width="30" height="30" patternUnits="userSpaceOnUse">
    <rect width="30" height="30" fill="none" />
    <circle cx="15" cy="15" r="0.5" fill="#21262d" />
  </pattern>
  <rect width="900" height="400" fill="url(#grid)" opacity="0.5" />

  <!-- ==================== TOP ROW: Main Flow ==================== -->
  <!-- Y center for top row: 120 -->

  <!-- iPhone (Browser) -->
  <g filter="url(#shadow)">
    <rect x="30" y="85" width="120" height="70" rx="10" ry="10"
          fill="#0d1117" stroke="#d29922" stroke-width="1.5" />
    <rect x="30" y="85" width="120" height="70" rx="10" ry="10"
          fill="#d29922" opacity="0.08" />
  </g>
  <!-- iPhone icon (simple phone outline) -->
  <rect x="53" y="97" width="16" height="24" rx="3" ry="3"
        fill="none" stroke="#d29922" stroke-width="1.2" />
  <line x1="59" y1="116" x2="63" y2="116" stroke="#d29922" stroke-width="1" stroke-linecap="round" />
  <text x="74" y="112" fill="#e6edf3" font-family="system-ui, -apple-system, sans-serif"
        font-size="13" font-weight="600">iPhone</text>
  <text x="90" y="143" fill="#8b949e" font-family="system-ui, -apple-system, sans-serif"
        font-size="10" text-anchor="middle">Browser</text>

  <!-- Arrow: iPhone → Tailscale -->
  <line x1="150" y1="120" x2="195" y2="120"
        stroke="#8b949e" stroke-width="1.5" marker-end="url(#arrow)" />

  <!-- Tailscale VPN -->
  <g filter="url(#shadow)">
    <rect x="200" y="85" width="140" height="70" rx="10" ry="10"
          fill="#0d1117" stroke="#58a6ff" stroke-width="1.5" />
    <rect x="200" y="85" width="140" height="70" rx="10" ry="10"
          fill="#58a6ff" opacity="0.08" />
  </g>
  <!-- Shield icon for VPN -->
  <path d="M228,100 L228,112 C228,118 233,122 238,124 C243,122 248,118 248,112 L248,100 L238,96 Z"
        fill="none" stroke="#58a6ff" stroke-width="1.2" />
  <text x="254" y="112" fill="#e6edf3" font-family="system-ui, -apple-system, sans-serif"
        font-size="13" font-weight="600">Tailscale</text>
  <text x="270" y="143" fill="#8b949e" font-family="system-ui, -apple-system, sans-serif"
        font-size="10" text-anchor="middle">VPN Tunnel</text>

  <!-- Arrow: Tailscale → Mac -->
  <line x1="340" y1="120" x2="385" y2="120"
        stroke="#8b949e" stroke-width="1.5" marker-end="url(#arrow)" />

  <!-- Mac -->
  <g filter="url(#shadow)">
    <rect x="390" y="85" width="120" height="70" rx="10" ry="10"
          fill="#0d1117" stroke="#30363d" stroke-width="1.5" />
    <rect x="390" y="85" width="120" height="70" rx="10" ry="10"
          fill="#e6edf3" opacity="0.04" />
  </g>
  <!-- Mac icon (monitor) -->
  <rect x="413" y="98" width="20" height="14" rx="2" ry="2"
        fill="none" stroke="#e6edf3" stroke-width="1.2" />
  <line x1="420" y1="112" x2="426" y2="112" stroke="#e6edf3" stroke-width="1" />
  <line x1="423" y1="112" x2="423" y2="116" stroke="#e6edf3" stroke-width="1" />
  <line x1="418" y1="116" x2="428" y2="116" stroke="#e6edf3" stroke-width="1" stroke-linecap="round" />
  <text x="438" y="112" fill="#e6edf3" font-family="system-ui, -apple-system, sans-serif"
        font-size="13" font-weight="600">Mac</text>
  <text x="450" y="143" fill="#8b949e" font-family="system-ui, -apple-system, sans-serif"
        font-size="10" text-anchor="middle">Host Machine</text>

  <!-- Arrow: Mac → tmux -->
  <line x1="510" y1="120" x2="555" y2="120"
        stroke="#8b949e" stroke-width="1.5" marker-end="url(#arrow)" />

  <!-- tmux -->
  <g filter="url(#shadow)">
    <rect x="560" y="85" width="120" height="70" rx="10" ry="10"
          fill="#0d1117" stroke="#3fb950" stroke-width="1.5" />
    <rect x="560" y="85" width="120" height="70" rx="10" ry="10"
          fill="#3fb950" opacity="0.08" />
  </g>
  <!-- Terminal icon -->
  <text x="583" y="113" fill="#3fb950" font-family="Consolas, Monaco, monospace"
        font-size="16" font-weight="700">&gt;_</text>
  <text x="610" y="112" fill="#e6edf3" font-family="system-ui, -apple-system, sans-serif"
        font-size="13" font-weight="600">tmux</text>
  <text x="620" y="143" fill="#8b949e" font-family="system-ui, -apple-system, sans-serif"
        font-size="10" text-anchor="middle">Session Mgr</text>

  <!-- Arrow: tmux → Claude Code -->
  <line x1="680" y1="120" x2="725" y2="120"
        stroke="#8b949e" stroke-width="1.5" marker-end="url(#arrow)" />

  <!-- Claude Code -->
  <g filter="url(#shadow)">
    <rect x="730" y="85" width="140" height="70" rx="10" ry="10"
          fill="#0d1117" stroke="#bc8cff" stroke-width="1.5" />
    <rect x="730" y="85" width="140" height="70" rx="10" ry="10"
          fill="#bc8cff" opacity="0.08" />
  </g>
  <!-- Sparkle icon for AI -->
  <path d="M755,108 L757,103 L759,108 L764,110 L759,112 L757,117 L755,112 L750,110 Z"
        fill="#bc8cff" opacity="0.9" />
  <text x="769" y="112" fill="#e6edf3" font-family="system-ui, -apple-system, sans-serif"
        font-size="13" font-weight="600">Claude Code</text>
  <text x="800" y="143" fill="#8b949e" font-family="system-ui, -apple-system, sans-serif"
        font-size="10" text-anchor="middle">AI Agent</text>

  <!-- ==================== VERTICAL CONNECTOR FROM MAC ==================== -->

  <!-- Vertical line from Mac box down to branch point -->
  <line x1="450" y1="155" x2="450" y2="210"
        stroke="#30363d" stroke-width="1.5" stroke-dasharray="4,3" />

  <!-- Horizontal branch line -->
  <line x1="300" y1="210" x2="600" y2="210"
        stroke="#30363d" stroke-width="1.5" />

  <!-- Left branch down to Port 8080 -->
  <line x1="300" y1="210" x2="300" y2="255"
        stroke="#30363d" stroke-width="1.5" marker-end="url(#arrow-down)" />

  <!-- Right branch down to Port 7681 -->
  <line x1="600" y1="210" x2="600" y2="255"
        stroke="#30363d" stroke-width="1.5" marker-end="url(#arrow-down)" />

  <!-- ==================== BOTTOM ROW: Service Ports ==================== -->

  <!-- Port 8080: Voice Wrapper -->
  <g filter="url(#shadow)">
    <rect x="210" y="260" width="180" height="90" rx="10" ry="10"
          fill="#0d1117" stroke="#3fb950" stroke-width="1.5" />
    <rect x="210" y="260" width="180" height="90" rx="10" ry="10"
          fill="#3fb950" opacity="0.06" />
  </g>
  <text x="300" y="286" fill="#3fb950" font-family="Consolas, Monaco, monospace"
        font-size="14" font-weight="700" text-anchor="middle">:8080</text>
  <text x="300" y="310" fill="#e6edf3" font-family="system-ui, -apple-system, sans-serif"
        font-size="13" font-weight="600" text-anchor="middle">Voice Wrapper</text>
  <text x="300" y="330" fill="#8b949e" font-family="system-ui, -apple-system, sans-serif"
        font-size="10" text-anchor="middle">Mobile-optimized UI</text>

  <!-- Port 7681: Raw Terminal -->
  <g filter="url(#shadow)">
    <rect x="510" y="260" width="180" height="90" rx="10" ry="10"
          fill="#0d1117" stroke="#3fb950" stroke-width="1.5" />
    <rect x="510" y="260" width="180" height="90" rx="10" ry="10"
          fill="#3fb950" opacity="0.06" />
  </g>
  <text x="600" y="286" fill="#3fb950" font-family="Consolas, Monaco, monospace"
        font-size="14" font-weight="700" text-anchor="middle">:7681</text>
  <text x="600" y="310" fill="#e6edf3" font-family="system-ui, -apple-system, sans-serif"
        font-size="13" font-weight="600" text-anchor="middle">Raw Terminal</text>
  <text x="600" y="330" fill="#8b949e" font-family="system-ui, -apple-system, sans-serif"
        font-size="10" text-anchor="middle">ttyd web shell</text>

  <!-- ==================== LABELS ==================== -->

  <!-- "Exposed Services" label for bottom section -->
  <text x="450" y="385" fill="#484f58" font-family="system-ui, -apple-system, sans-serif"
        font-size="10" text-anchor="middle" letter-spacing="2" text-transform="uppercase">EXPOSED SERVICES</text>

</svg>